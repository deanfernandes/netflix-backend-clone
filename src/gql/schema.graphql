enum MembershipStatus {
  ACTIVE
  EXPIRED
  CANCELLED
}

enum ContentAgeRating {
  U
  PG
  _12
  _15
  _18
}

enum ContentRating {
  THUMBS_UP
  THUMBS_DOWN
  DOUBLE_THUMBS_UP
}

type Account {
  id: ID!
  email: String!
  mobileNumber: String!
  createdAt: String!

  profiles: [AccountProfile!]!
  memberships: [AccountMembership!]!
}

type AccountProfile {
  id: ID!
  name: String!
  profileImageUrl: String
  hasPin: Boolean!

  account: Account!
}

type AccountMembershipPlan {
  id: ID!
  name: String!
  monthlyPrice: Float!
}

type AccountMembership {
  id: ID!
  startDate: String!
  endDate: String!
  status: MembershipStatus!
  autoRenew: Boolean!
  accountMembershipPrice: Float!

  account: Account!
  accountMembershipPlan: AccountMembershipPlan!
}

type Genre {
  id: ID!
  name: String!
}

type Film {
  id: ID!
  title: String!
  synopsis: String!
  releaseYear: Int!
  ageRating: ContentAgeRating!
  createdAt: String!
  hasUserWatched: Boolean
  userRating: ContentRating

  genres: [Genre!]!
  castMembers: [CastMember!]!
}

type Series {
  id: ID!
  title: String!
  synopsis: String!
  releaseYear: Int!
  ageRating: ContentAgeRating!
  createdAt: String!
  hasUserWatched: Boolean
  userRating: ContentRating

  seasons: [Season!]!
  genres: [Genre!]!
  castMembers: [CastMember!]!
}

type Season {
  id: ID!
  number: Int!
  ageRating: ContentAgeRating!
  releaseYear: Int!

  series: Series!
  episodes: [Episode!]!
}

type Episode {
  id: ID!
  title: String!
  synopsis: String!
  durationMinutes: Int!
  number: Int!

  season: Season!
}

type CastMember {
  id: ID!
  name: String!
}

type Watchlist {
  films: [WatchlistFilm!]!
  series: [WatchlistSeries!]!
}

type WatchlistFilm {
  film: Film!
  addedAt: String!
}

type WatchlistSeries {
  series: Series!
  addedAt: String!
}

type Query {
  account(id: ID!): Account
  accounts(limit: Int = 50, offset: Int = 0): [Account!]!
  accountProfile(id: ID!): AccountProfile
  accountProfiles(accountId: ID!): [AccountProfile!]!
  accountMembership(id: ID!): AccountMembership
  accountMemberships(accountId: ID!): [AccountMembership!]!

  film(id: ID!): Film
  films(
    genreIds: [ID!]
    ageRating: ContentAgeRating
    search: String
    limit: Int = 20
    offset: Int = 0
  ): [Film!]!
  newFilms(limit: Int = 20, offset: Int = 0): [Film!]!
  popularFilms(limit: Int = 20, offset: Int = 0): [Film!]!
  series(id: ID!): Series
  seriesList(
    genreIds: [ID!]
    ageRating: ContentAgeRating
    search: String
    limit: Int
    offset: Int
  ): [Series!]!
  newSeries(limit: Int, offset: Int): [Series!]!
  popularSeries(limit: Int, offset: Int): [Series!]!
  season(id: ID!): Season
  seasons(seriesId: ID!): [Season!]!
  episode(id: ID!): Episode
  episodes(seasonId: ID!): [Episode!]!

  watchlist(profileId: ID!): Watchlist
}

type Mutation {
  changeAccountPassword(
    accountId: ID!
    oldPassword: String!
    newPassword: String!
  ): Boolean!

  updateMembershipAutoRenew(
    accountMembershipId: ID!
    autoRenew: Boolean!
  ): AccountMembership!

  cancelMembership(accountMembershipId: ID!): AccountMembership!

  createProfile(
    accountId: ID!
    name: String!
    profileImageUrl: String
    pin: String
  ): AccountProfile!

  updateProfile(
    profileId: ID!
    name: String
    profileImageUrl: String
    pin: String
  ): AccountProfile!

  deleteProfile(profileId: ID!): Boolean!

  setProfilePin(profileId: ID!, pin: String!): AccountProfile!

  deleteProfilePin(profileId: ID!): AccountProfile!

  addFilmToWatchlist(profileId: ID!, filmId: ID!): WatchlistFilm!
  removeFilmFromWatchlist(profileId: ID!, filmId: ID!): WatchlistFilm!
  addSeriesToWatchlist(profileId: ID!, seriesId: ID!): WatchlistSeries!
  removeSeriesFromWatchlist(profileId: ID!, seriesId: ID!): WatchlistSeries!

  rateFilm(profileId: ID!, filmId: ID!, rating: ContentRating!): Film!
  removeFilmRating(profileId: ID!, filmId: ID!): Film!
  rateSeries(profileId: ID!, seriesId: ID!, rating: ContentRating!): Series!
  removeSeriesRating(profileId: ID!, seriesId: ID!): Series!
  markFilmWatched(profileId: ID!, filmId: ID!): Film!
  markFilmUnwatched(profileId: ID!, filmId: ID!): Film!
  markSeriesWatched(profileId: ID!, seriesId: ID!): Series!
  markSeriesUnwatched(profileId: ID!, seriesId: ID!): Series!
}
